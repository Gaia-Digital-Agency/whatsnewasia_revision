import{n as j,r as n,j as e}from"./chunk-JZWAC4HX-CJhxn-1v.js";import{C as U}from"./ComponentCard-C4EWCTcj.js";import{P as O}from"./PageBreadCrumb-BeeDKLN3.js";import{P as W}from"./PageMeta-BV4yoibv.js";import{S as H}from"./pencil-DVG8VRsT.js";import{S as K}from"./list-QkRPlqwI.js";import{T as _,a as Y,b as E,c as p,d as q}from"./index-D0lLYbpS.js";import{B as G}from"./Badge-291kYT_H.js";import{w as M}from"./sweetalert2-react-content.es-SO4eO7oB.js";import{S as $}from"./sweetalert2.esm.all-BbQndx0i.js";import{P as J}from"./PaginationWithButton-BX2bix7V.js";import{S as Q}from"./trash-DSGi1c9C.js";import{I as L}from"./InputField-BzPVlfav.js";import{L as D}from"./Label-DAhUyyCs.js";import{B as V}from"./Button-BSlodQCJ.js";import{A as F}from"./Alert-D2eRQLh0.js";import{S as X}from"./download-DpAzEKLt.js";import{u as R}from"./useTimedMessage-BKP6J-G3.js";import{A as Z}from"./FeaturedImage-CkqylzIa.js";import{u as ee}from"./useModal-BNmD4s86.js";import{u as te}from"./useNavigationPrompt-HxlkR_Is.js";import"./index-DP5xIcvO.js";import"./media.service-DJZ01T9t.js";import"./MediaForm-owkpfofN.js";import"./index-DQmg3Or3.js";import"./index-DLnCA4SJ.js";import"./createLucideIcon-DTxeq6k1.js";const re=async()=>{try{return(await j.get("socmed")).data}catch(a){throw console.error(a),a}},ae=async a=>{try{return(await j.get(`socmed/${a}`)).data}catch(s){throw console.error(s),s}},se=async a=>{try{return(await j.post("socmed",a)).data}catch(s){throw console.error("BADSIBA => ",s),s}},oe=async(a,s)=>{try{return(await j.put(`socmed/${a}`,s)).data}catch(d){throw console.error(d),d}},ne=async a=>{try{return(await j.delete(`socmed/${a}`)).data}catch(s){throw console.error(s),s}};function de({onEditSocmed:a,refreshKey:s,onRefresh:d}){const[m,g]=n.useState([]),[x,i]=n.useState(1),[l,h]=n.useState(5),[u,N]=n.useState("");n.useEffect(()=>{(async()=>{try{const r=await re();g((r==null?void 0:r.data)??[])}catch(r){console.error("Error fetching data:",r)}})()},[s]);const w=n.useMemo(()=>m.filter(t=>[t.platform,t.url].some(r=>r==null?void 0:r.toLowerCase().includes(u.toLowerCase()))),[m,u]),v=async t=>{try{const r=await ae(t);a(r==null?void 0:r.data),window.scrollTo({top:0,behavior:"smooth"})}catch(r){throw console.error(r),r}},P=async t=>{try{await ne(t),d()}catch(r){throw console.error(r),r}},c=(t,r)=>{M($).fire({title:`Are you sure to Delete ${t}?`,text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0}).then(o=>{o.isConfirmed&&(P(r),M($).fire({title:"Deleted!",text:"Data has been deleted.",icon:"success"}))})},f=w.length,C=Math.ceil(f/l),T=t=>{i(t)},b=(x-1)*l,S=Math.min(b+l,f),A=w.slice(b,S);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"overflow-hidden rounded-xl border border-gray-200 bg-white dark:border-white/[0.05] dark:bg-white/[0.03]",children:[e.jsxs("div",{className:"flex flex-col gap-2 px-4 py-4 border border-b-1 border-gray-100 dark:border-white/[0.05] rounded-t-xl sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:" Show "}),e.jsxs("div",{className:"relative z-20 bg-transparent",children:[e.jsx("select",{className:"w-full py-2 pl-3 pr-8 text-sm text-gray-800 bg-transparent border border-gray-300 rounded-lg appearance-none dark:bg-dark-900 h-9 bg-none shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800",value:l,onChange:t=>h(Number(t.target.value)),children:[5,10].map(t=>e.jsx("option",{value:t,className:"text-gray-500 dark:bg-gray-900 dark:text-gray-400",children:t},t))}),e.jsx("span",{className:"absolute z-30 text-gray-500 -translate-y-1/2 right-2 top-1/2 dark:text-gray-400",children:e.jsx("svg",{className:"stroke-current",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M3.8335 5.9165L8.00016 10.0832L12.1668 5.9165",stroke:"",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:" entries "})]}),e.jsx("input",{type:"text",placeholder:"Search...",className:"px-3 py-2 text-sm border rounded-lg dark:bg-gray-800 dark:text-white",value:u,onChange:t=>N(t.target.value)})]}),e.jsx("div",{className:"max-w-full overflow-x-auto",children:e.jsxs(_,{children:[e.jsx(Y,{className:"border-b border-l-amber-800 dark:border-white/[0.05]",children:e.jsxs(E,{children:[e.jsx(p,{isHeader:!0,className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400 max-w-[10px]",children:"#"}),e.jsx(p,{isHeader:!0,className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400 max-w-[10px]",children:"Platform Name"}),e.jsx(p,{isHeader:!0,className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400",children:"Url"}),e.jsx(p,{isHeader:!0,className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400",children:"Action"})]})}),e.jsx(q,{className:"divide-y divide-gray-100 dark:divide-white/[0.05]",children:A.map((t,r)=>e.jsxs(E,{children:[e.jsx(p,{className:"px-4 py-3 text-gray-500 text-start text-theme-sm dark:text-gray-400",children:b+r+1}),e.jsx(p,{className:"px-4 py-3 text-gray-500 text-start text-theme-sm dark:text-gray-400",children:t.platform}),e.jsx(p,{className:"px-4 py-3 text-gray-500 text-start text-theme-sm dark:text-gray-400",children:e.jsx(G,{variant:"light",color:"info",children:t.url})}),e.jsx(p,{className:"px-4 py-4 font-normal text-gray-800 border border-gray-100 dark:border-white/[0.05] text-theme-sm dark:text-white/90 whitespace-nowrap ",children:e.jsxs("div",{className:"flex items-center w-full gap-2",children:[e.jsx("button",{onClick:()=>c(t.platform,t.id),className:"text-gray-500 hover:text-error-500 dark:text-gray-400 dark:hover:text-error-500",children:e.jsx(Q,{className:"size-5"})}),e.jsx("button",{onClick:()=>v(t.id),className:"text-gray-500 hover:text-green-500 dark:text-gray-400 dark:hover:text-white/90",children:e.jsx(H,{className:"size-5"})})]})})]},t.id))})]})}),e.jsx("div",{className:"border border-t-1 rounded-b-xl border-gray-100 py-4 pl-[18px] pr-4 dark:border-white/[0.05]",children:e.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between",children:[e.jsx("div",{className:"pt-3 xl:pt-0",children:e.jsxs("p",{className:"pt-3 text-sm font-medium text-center text-gray-500 border-t border-gray-100 dark:border-gray-800 dark:text-gray-400 xl:border-t-0 xl:pt-0 xl:text-left",children:["Showing ",b+1," to ",S," of ",f," entries"]})}),e.jsx(J,{totalPages:C,initialPage:x,onPageChange:T})]})})]})})}const z="http://localhost:8080";function ce({selectedSocmed:a,onRefresh:s}){const[d,m]=n.useState(null),[g,x]=n.useState(null),[i,l]=n.useState(""),[h,u]=n.useState(""),[N,w]=n.useState(!1),[v,P]=n.useState(0),[c,f]=n.useState(),{closeModal:C,openModal:T}=ee(!1),{setBlock:b}=te();n.useEffect(()=>{if(a){const o=a[0];l(o.platform??""),u(o.url??""),f({url:`${z}/${o.icon}`,id:o.id}),P(o.id??0),w(!0)}},[a]),R(g,x),R(d,m);const S=()=>{l(""),u(""),f({url:"",id:void 0})},A=async o=>{var I,B;o.preventDefault();const k={platform_name:i,icon:c==null?void 0:c.id,url:h};try{N?(await oe(v,k),x(i+" is Created Successfully")):(await se(k),x(i+" is Created Successfully")),S(),s()}catch(y){console.error("OPO IKI ??",y),y instanceof Error&&m(y.message),typeof y=="object"&&y!==null&&"response"in y&&m(((B=(I=y.response)==null?void 0:I.data)==null?void 0:B.message)??"Something went wrong")}},t=({label:o,children:k})=>e.jsxs("div",{className:"input-wrapper",children:[e.jsx(D,{children:o}),k]}),r=o=>{f({url:`${z}/${o.path}`,id:o.id}),C(),b(!0)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-5",children:d&&e.jsx(F,{variant:"error",title:"Error",message:d})}),e.jsx("div",{className:"mb-5",children:g&&e.jsx(F,{variant:"success",title:"Success",message:g})}),e.jsxs("form",{onSubmit:A,children:[e.jsxs("div",{className:"space-y-6 space-x-6 grid grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(D,{htmlFor:"cPlatformName",children:"Platform Name"}),e.jsx(L,{type:"text",id:"cPlatformName",onChange:o=>l(o.target.value),value:i,placeholder:"Acme"})]}),e.jsxs("div",{children:[e.jsx(D,{htmlFor:"cSocmedUrl",children:"Url"}),e.jsx(L,{type:"url",id:"cSocmedUrl",onChange:o=>u(o.target.value),value:h,placeholder:"https://www.example.com/username"})]})]}),e.jsx("div",{className:"w-50 h-50",children:e.jsx(t,{label:"Icon",children:e.jsx(Z,{url:c!=null&&c.url?`${c==null?void 0:c.url}`:"#",onClick:T,onSave:r})})}),e.jsx("div",{className:"flex justify-end",children:e.jsx(V,{startIcon:e.jsx(X,{className:"size-5"}),className:"w-1/4",children:"Save"})})]})]})}function Fe(){const[a,s]=n.useState("datas"),[d,m]=n.useState(),[g,x]=n.useState(0),i=()=>{x(h=>h+1)},l=h=>{m(h),s("form")};return e.jsxs("div",{children:[e.jsx(W,{title:"Whats New Asia Admin Dashboard | Social Media Settings",description:"This is Social Media Setting Page for Whats New Asia Admin Dashboard Template"}),e.jsx(O,{pageTitle:"Social Media"}),e.jsx(U,{title:"",className:"mt-12",children:e.jsx("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-1",children:e.jsxs("div",{className:"space-y-12",children:[e.jsxs("nav",{className:"flex space-x-2 overflow-x-auto scrollbar-thin scrollbar-thumb-gray-200 dark:scrollbar-thumb-gray-600",children:[e.jsxs("button",{onClick:()=>s("datas"),className:`inline-flex items-center gap-2 border-b-2 px-2.5 py-2 text-sm font-medium transition-colors duration-200 ${a==="datas"?"text-brand-500 border-brand-500 dark:text-brand-400 dark:border-brand-400":"text-gray-500 border-transparent hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}`,children:[e.jsx(K,{className:"size-5"}),"Data Social Media"]}),e.jsxs("button",{onClick:()=>s("form"),className:`inline-flex items-center gap-2 border-b-2 px-2.5 py-2 text-sm font-medium transition-colors duration-200 ${a==="form"?"text-brand-500 border-brand-500 dark:text-brand-400 dark:border-brand-400":"text-gray-500 border-transparent hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}`,children:[e.jsx(H,{className:"size-5"}),"Form"]})]}),a==="datas"&&e.jsx(de,{onEditSocmed:l,refreshKey:g,onRefresh:i}),a==="form"&&e.jsx(ce,{selectedSocmed:d,onRefresh:i})]})})})]})}export{Fe as default};
