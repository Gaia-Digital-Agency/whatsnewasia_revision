import{r as s,j as e,Q as D,g as T,S as L}from"./chunk-JZWAC4HX-CJhxn-1v.js";import{C as B}from"./ComponentCard-C4EWCTcj.js";import{P as I}from"./PageBreadCrumb-BeeDKLN3.js";import{P as E}from"./PageMeta-BV4yoibv.js";import{B as W}from"./Button-BSlodQCJ.js";import{T as z,a as H,b as u,c as i,d as M}from"./index-D0lLYbpS.js";import{S as F}from"./pencil-DVG8VRsT.js";import{B as _}from"./Badge-291kYT_H.js";import{S as R}from"./Switch-DDCc3eRW.js";import{w as b}from"./sweetalert2-react-content.es-SO4eO7oB.js";import{S as j}from"./sweetalert2.esm.all-BbQndx0i.js";import{P as $}from"./PaginationWithButton-BX2bix7V.js";function ae(){const[x,m]=s.useState([]),[h,g]=s.useState(""),[p,w]=s.useState(1),[d,k]=s.useState(5),[l,N]=s.useState(""),v=t=>t.trim().split(/\s+/).map(a=>{var r;return((r=a[0])==null?void 0:r.toUpperCase())||""}).join("");s.useEffect(()=>{(async()=>{try{const r=(await D()).data;m(r)}catch(a){console.error("Failed to fetch all user:",a)}finally{}})()},[]),s.useEffect(()=>{(async()=>{try{const a=await T();g(a?a.data[0].email??"":"")}catch(a){console.error("Failed to fetch all user:",a)}finally{}})()},[]);const y=s.useMemo(()=>x.filter(t=>[t.name,t.email].some(a=>a==null?void 0:a.toLowerCase().includes(l.toLowerCase()))),[x,l]),S=()=>{window.location.href="/admin/registration"},A=async(t,a)=>{try{await L(t,{status:a}),m(r=>r.map(c=>c.id===t?{...c,isActive:a}:c)),b(j).fire({title:`User ${a?"Activated":"Deactivated"}`,icon:`${a?"success":"info"}`})}catch(r){b(j).fire({title:"Error",text:"Failed to update user status",icon:"error"}).then(()=>{location.reload()}),console.error("Error updating user status:",r)}},n=y.length,P=Math.ceil(n/d),C=t=>{w(t)},o=(p-1)*d,f=Math.min(o+d,n),U=y.slice(o,f);return e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx(E,{title:"Whats New Asia Admin Dashboard | User List",description:"This is User List Page for Whats New Asia Admin Dashboard Template"}),e.jsx("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-1",children:e.jsxs("div",{className:"space-y-12",children:[e.jsx(I,{pageTitle:"User List"}),e.jsx("div",{className:"flex justify-start",children:e.jsx(W,{size:"sm",variant:"primary",startIcon:e.jsx(F,{className:"size-5"}),onClick:S,children:"Add User"})}),e.jsx(B,{title:"Data",children:e.jsxs("div",{className:"overflow-hidden rounded-xl border border-gray-200 bg-white dark:border-white/[0.05] dark:bg-white/[0.03]",children:[e.jsxs("div",{className:"flex flex-col gap-2 px-4 py-4 border border-b-1 border-gray-100 dark:border-white/[0.05] rounded-t-xl sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:[" ","Show Â´"]}),e.jsxs("div",{className:"relative z-20 bg-transparent",children:[e.jsx("select",{className:"w-full py-2 pl-3 pr-8 text-sm text-gray-800 bg-transparent border border-gray-300 rounded-lg appearance-none dark:bg-dark-900 h-9 bg-none shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800",value:d,onChange:t=>k(Number(t.target.value)),children:[5,10].map(t=>e.jsx("option",{value:t,className:"text-gray-500 dark:bg-gray-900 dark:text-gray-400",children:t},t))}),e.jsx("span",{className:"absolute z-30 text-gray-500 -translate-y-1/2 right-2 top-1/2 dark:text-gray-400",children:e.jsx("svg",{className:"stroke-current",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M3.8335 5.9165L8.00016 10.0832L12.1668 5.9165",stroke:"",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),e.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:[" ","entries"," "]})]}),e.jsx("input",{type:"text",placeholder:"Search...",className:"px-3 py-2 text-sm border rounded-lg dark:bg-gray-800 dark:text-white",value:l,onChange:t=>N(t.target.value)})]}),e.jsx("div",{className:"max-w-full overflow-x-auto",children:e.jsxs(z,{children:[e.jsx(H,{className:"border-b border-gray-100 dark:border-white/[0.05]",children:e.jsxs(u,{children:[e.jsx(i,{isHeader:!0,className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400",children:"Name"}),e.jsx(i,{isHeader:!0,className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400",children:"Email"}),e.jsx(i,{isHeader:!0,className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400",children:"Location"}),e.jsx(i,{isHeader:!0,className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400",children:"Status"})]})}),e.jsx(M,{className:"divide-y divide-gray-100 dark:divide-white/[0.05]",children:U.map(t=>e.jsxs(u,{children:[e.jsx(i,{className:"px-5 py-4 sm:px-6 text-start",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 overflow-hidden rounded-full bg-blue-200 text-blue-600 flex items-center justify-center",children:e.jsx("h4",{children:v(t.name.split(" ")[0])})}),e.jsxs("div",{children:[e.jsxs("span",{className:"block font-medium text-gray-800 text-theme-sm dark:text-white/90",children:[t.name," ",h===t.email&&e.jsx("span",{className:"ml-1",children:e.jsx(_,{size:"sm",color:"info",children:"You"})})]}),e.jsx("span",{className:"block text-gray-500 text-theme-xs dark:text-gray-400",children:t.user_level.replace("_"," ")})]})]})}),e.jsx(i,{className:"px-4 py-3 text-gray-500 text-start text-theme-sm dark:text-gray-400",children:t.email}),e.jsxs(i,{className:"px-4 py-3 text-gray-500 text-start text-theme-sm dark:text-gray-400",children:[e.jsx("span",{className:"block text-gray-950 text-theme-sm dark:text-gray-400",children:t.name_city}),e.jsx("span",{className:"block text-gray-500 text-theme-xs dark:text-gray-400",children:t.name_country})]}),e.jsx(i,{className:"px-4 py-3 text-gray-500 text-start text-theme-sm dark:text-gray-400",children:e.jsx(R,{label:t.isActive?"Active":"Suspended",defaultChecked:t.isActive,disabled:h===t.email,onChange:a=>A(t.id,a)})})]},t.id))})]})}),e.jsx("div",{className:"border border-t-1 rounded-b-xl border-gray-100 py-4 pl-[18px] pr-4 dark:border-white/[0.05]",children:e.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between",children:[e.jsx($,{totalPages:P,initialPage:p,onPageChange:C}),e.jsx("div",{className:"pt-3 xl:pt-0",children:e.jsxs("p",{className:"pt-3 text-sm font-medium text-center text-gray-500 border-t border-gray-100 dark:border-gray-800 dark:text-gray-400 xl:border-t-0 xl:pt-0 xl:text-left",children:["Showing ",o+1," to ",f," of ",n," ","entries"]})})]})})]})})]})})]})})}export{ae as default};
