import{X as te,h as re,r as c,u as ie,j as e,L as g,b as X}from"./chunk-JZWAC4HX-CJhxn-1v.js";import{b as R}from"./article.service-z7ufy3mB.js";import{A as ae}from"./Advertisement-BEmpNNiq.js";import{N as le}from"./Newsletter-BETIhYln.js";import{I as v}from"./Image-26DLjn3y.js";import{B as q}from"./Button-CKoLZZEW.js";import{S as ne,a as ce}from"./create-element-if-not-defined-QfIqIoqv.js";import{P as oe}from"./swiper-bundle-vZBaRnHo.js";import{f as de}from"./format-D2eluCP0.js";import{S as me,F as pe,a as xe,L as he,b as je,W as ge,c as ue}from"./index-DPY3LV4I.js";import{u as fe}from"./NotificationContext-Y96rFy5e.js";import{p as we}from"./Helmet-DoXJ-fYk.js";import{u as y}from"./useArticle-B34IiWbX.js";import"./newsletter.service-BcMzdv_k.js";import"./index-BWQaD3Lf.js";import"./index-zMJ_-Hqf.js";const{Helmet:ve}=we,z="http://localhost:8080",G="http://localhost:8080",ye=({article:r})=>{var m,t;const{getPermalink:s,getFeaturedImageUrl:d}=y(),{taxonomies:h}=X();return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"image-wrapper mb-5",children:e.jsx(v,{ratio:"62%",url:d(r),link:s(r)})}),e.jsx("div",{className:"category-wrapper",children:e.jsx("p",{className:"uppercase text-front-red",children:(t=(m=h.categories)==null?void 0:m.find(a=>a.id==r.category_id))==null?void 0:t.title})}),e.jsx("div",{className:"title-wrapper",children:e.jsx(g,{to:s(r),children:e.jsx("p",{className:"text-front-subtitle font-serif",children:r.title})})})]})},Ne=({articles:r,theArticle:s})=>{const{getPermalink:d,getFeaturedImageUrl:h}=y(),{taxonomies:m}=X();if(!s)return;const t=r.filter(a=>a.id!=s.id);return t.length==10&&t.pop(),e.jsx(e.Fragment,{children:e.jsxs("div",{id:"related-articles",className:"relative pb-12",children:[e.jsx("div",{className:"swiper-pagination"}),e.jsx(ne,{slidesPerView:1,spaceBetween:10,modules:[oe],pagination:{el:"#related-articles .swiper-pagination",enabled:!0,clickable:!0},breakpoints:{768:{slidesPerView:2,spaceBetween:20},1024:{slidesPerView:4,spaceBetween:40}},children:t.map(a=>{var j,u;return e.jsxs(ce,{children:[e.jsx("div",{className:"image-wrapper mb-5 line-right-5",children:e.jsx(v,{url:h(a),link:d(a),ratio:"100%"})}),e.jsx("div",{className:"category-wrapper mb-1",children:e.jsx("p",{className:"",children:(u=(j=m.categories)==null?void 0:j.find(f=>f.id==a.category_id))==null?void 0:u.title})}),e.jsx("div",{className:"title-wrapper",children:e.jsx(g,{to:d(a),children:e.jsx("p",{className:"font-serif text-front-title",children:a.title})})})]},a.id)})})]})})},w=({article:r})=>e.jsx("div",{className:"mb-4",children:e.jsx(q,{text:"Edit article",link:`/admin/mst_article/edit/${r==null?void 0:r.id}`})}),He=()=>{var N,_,b,k,F,L,S,$,A,C,B,W,E,P,I,M,V,H,U,T,Z;const{initialData:r}=te(),{actualRoute:s,clientChange:d}=re(),{getDeepestLocation:h,getFeaturedImageUrl:m}=y(),[t,a]=c.useState((r==null?void 0:r.article)??void 0),[j,u]=c.useState((r==null?void 0:r.discover)??[]),[f,J]=c.useState((r==null?void 0:r.related)??[]),[p,K]=c.useState(),{setNotification:O}=fe(),{userDetails:l}=ie(),[Q,Y]=c.useState(!1);console.log(l,"userDetails single");const x=h(s.article,"city");c.useEffect(()=>{K(window.location.href),Y(!0)},[]),c.useEffect(()=>{window.scrollTo(0,0);try{a(s.article)}catch(n){console.log(n)}},[s]),c.useEffect(()=>{d&&(async()=>{var n,o;try{const i=await R({category:(n=s==null?void 0:s.category)==null?void 0:n.id,limit:11});i!=null&&i.articles&&J(i.articles)}catch(i){console.log(i)}try{const i=await R({id_country:(o=s==null?void 0:s.country)==null?void 0:o.id,limit:4});i!=null&&i.articles&&u(i.articles)}catch(i){console.log(i)}})()},[t]);const D=()=>{if(j){const n=j.filter(o=>o.id!=(t==null?void 0:t.id));return n.length==4&&n.pop(),n==null?void 0:n.map(o=>e.jsx("div",{className:"discover-article-wrapper mb-6",children:e.jsx(ye,{article:o})},o.id))}},ee=()=>{if(Q)return(l==null?void 0:l.user_level)=="super_admin"?e.jsx(w,{article:t}):(l==null?void 0:l.user_level)=="admin_country"&&(t==null?void 0:t.id_country)==l.id_country?e.jsx(w,{article:t}):(l==null?void 0:l.user_level)=="admin_city"&&(t==null?void 0:t.id_city)==l.id_city?e.jsx(w,{article:t}):e.jsx(e.Fragment,{})},se=async()=>{p&&(await navigator.clipboard.writeText(p),O({message:"Copied URL to clipboard",type:"neutral"}))};return e.jsxs(e.Fragment,{children:[e.jsxs(ve,{children:[e.jsxs("title",{children:[((N=s.article)==null?void 0:N.title)??""," - Whatsnew Asia"]}),e.jsx("meta",{name:"description",content:(_=s.article)==null?void 0:_.sub_title}),e.jsx("link",{rel:"canonical",href:`${z}/${(b=s.country)==null?void 0:b.slug}/${(k=s.category)==null?void 0:k.slug_title}/${(F=s.article)==null?void 0:F.slug}`}),e.jsx("meta",{property:"og:type",content:"article"}),e.jsx("meta",{property:"og:title",content:`${((L=s.article)==null?void 0:L.title)??""} - Whatsnew Asia`}),e.jsx("meta",{property:"og:description",content:(S=s.article)==null?void 0:S.sub_title}),e.jsx("meta",{property:"og:url",content:`${z}/${($=s.country)==null?void 0:$.slug}/${(A=s.category)==null?void 0:A.slug_title}/${(C=s.article)==null?void 0:C.slug}`}),e.jsx("meta",{property:"og:image",content:`${G}/${((B=s.article)==null?void 0:B.featured_image_16_9_url)||((W=s.article)==null?void 0:W.featured_image_url)||"images/placeholder.png"}`}),e.jsx("meta",{property:"og:site_name",content:"Whatsnew Asia"}),e.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),e.jsx("meta",{name:"twitter:title",content:`${((E=s.article)==null?void 0:E.title)??""} - Whatsnew Asia`}),e.jsx("meta",{name:"twitter:description",content:(P=s.article)==null?void 0:P.sub_title}),e.jsx("meta",{name:"twitter:image",content:`${G}/${((I=s.article)==null?void 0:I.featured_image_16_9_url)||((M=s.article)==null?void 0:M.featured_image_url)||"images/placeholder.png"}`})]}),e.jsxs("article",{children:[e.jsx("div",{className:"container mb-24",children:e.jsxs("div",{className:"grid grid-cols-12 pt-12 md:gap-x-10 gap-y-10",children:[e.jsx("div",{className:"col-span-12 mb-6",children:e.jsxs("p",{className:"text-front-small uppercase",children:[e.jsx(g,{to:"/",children:"Home"})," / ",e.jsx(g,{to:`/${x==null?void 0:x.slug}`,children:x==null?void 0:x.name})," / ",e.jsx(g,{to:`/${(V=s==null?void 0:s.country)==null?void 0:V.slug}/${(H=s==null?void 0:s.category)==null?void 0:H.slug_title}`,children:(U=s==null?void 0:s.category)==null?void 0:U.title})]})}),e.jsxs("div",{className:"md:col-span-9 col-span-12",children:[e.jsxs("div",{className:"author-wrapper flex mb-6 justify-between",children:[e.jsxs("div",{className:"item flex gap-x-6",children:[e.jsxs("div",{className:"author flex gap-x-2.5",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"16",viewBox:"0 0 15 16",fill:"none",children:[e.jsxs("g",{clipPath:"url(#clip0_83_51)",children:[e.jsx("rect",{width:"15",height:"15",transform:"translate(0 0.5)",fill:"white"}),e.jsx("path",{d:"M1.875 11.2812V13.625H4.21875L11.1312 6.71249L8.7875 4.36874L1.875 11.2812ZM13.3813 4.46249L11.0375 2.11874L9.45625 3.70624L11.8 6.04999L13.3813 4.46249Z",fill:"#7F7F7F"})]}),e.jsx("defs",{children:e.jsx("clipPath",{id:"clip0_83_51",children:e.jsx("rect",{width:"15",height:"15",fill:"white",transform:"translate(0 0.5)"})})})]}),e.jsx("p",{className:"text-[#A9A9A9] text-front-small",children:t==null?void 0:t.author_name})]}),e.jsxs("div",{className:"author flex gap-x-2.5",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"14",viewBox:"0 0 15 14",fill:"none",children:[e.jsx("path",{d:"M1.125 4.14229C1.125 3.17103 1.91236 2.38367 2.88362 2.38367H12.1164C13.0877 2.38367 13.875 3.17103 13.875 4.14229V11.6164C13.875 12.5877 13.0877 13.375 12.1164 13.375H2.88362C1.91236 13.375 1.125 12.5877 1.125 11.6164V4.14229Z",stroke:"#7F7F7F",strokeWidth:"0.9",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M3.98267 0.624878V3.70246",stroke:"#7F7F7F",strokeWidth:"0.9",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M11.0173 0.624878V3.70246",stroke:"#7F7F7F",strokeWidth:"0.9",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M3.76294 5.90027H11.2371",stroke:"#7F7F7F",strokeWidth:"0.9",strokeLinecap:"round",strokeLinejoin:"round"})]}),e.jsx("p",{className:"text-[#A9A9A9] text-front-small",children:de(t==null?void 0:t.updatedAt)})]})]}),e.jsx("div",{className:"item",children:e.jsx(me,{className:"cursor-pointer",onClick:se})})]}),e.jsx("div",{className:"title-wrapper mb-4",children:e.jsx("h1",{className:"font-serif text-front-hero",children:t==null?void 0:t.title})}),e.jsx("div",{className:"featured-image-wrapper py-4 mb-4",children:e.jsx(v,{url:m(t,"16_9"),ratio:"56.25%",isLazy:!1,fetchPriority:"high"})}),e.jsxs("div",{className:"share-buttons-wrapper mb-8 flex items-center gap-x-5",children:[e.jsx("p",{children:"Share:"}),p&&e.jsxs(e.Fragment,{children:[e.jsx(pe,{url:p,children:e.jsx(xe,{className:"w-[24px] h-[24px]"})}),e.jsx(he,{url:p,children:e.jsx(je,{className:"w-[24px] h-[24px]"})}),e.jsx(ge,{url:p,children:e.jsx(ue,{className:"w-[24px] h-[24px]"})})]})]}),e.jsx("div",{className:"content-wrapper mb-8",dangerouslySetInnerHTML:{__html:(t==null?void 0:t.article_post)??""}})]}),e.jsxs("div",{className:"md:col-span-3 col-span-12",children:[ee(),e.jsx(ae,{ratio:"vertical"}),e.jsx("div",{className:"spacer py-6"}),e.jsx("p",{className:"font-serif text-front-article-title",children:"Discover More"}),e.jsx("div",{className:"spacer py-2"}),D()]})]})}),e.jsx("div",{className:"outer bg-front-section-grey py-8",children:e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"title-wrapper mb-6 text-center",children:e.jsxs("p",{className:"font-serif text-front-main-title",children:[e.jsx("span",{className:"text-front-red",children:"Related"})," Articles"]})}),f&&e.jsx(Ne,{articles:f,theArticle:t??null}),e.jsx("div",{className:"button-wrapper text-center pt-16 pb-8",children:e.jsx(q,{text:"VIEW ALL",link:`/${(T=s.country)==null?void 0:T.slug}/${(Z=s.category)==null?void 0:Z.slug_title}`})}),e.jsx("div",{className:"py-8",children:e.jsx("hr",{style:{borderColor:"#5F5F5F"}})}),e.jsx(le,{})]})})]})]})};export{He as default};
