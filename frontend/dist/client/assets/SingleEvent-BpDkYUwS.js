import{X as oe,h as me,r as o,u as pe,j as e,b as ee,L as se}from"./chunk-JZWAC4HX-CJhxn-1v.js";import{u as xe}from"./NotificationContext-Y96rFy5e.js";import{A as J}from"./Advertisement-BEmpNNiq.js";import{S as he,F as je,a as ue,L as ge,b as fe,W as ve,c as _e}from"./index-DPY3LV4I.js";import{I as u}from"./Image-26DLjn3y.js";import{S as Ne,a as we}from"./create-element-if-not-defined-QfIqIoqv.js";import{P as ye}from"./swiper-bundle-vZBaRnHo.js";import{b as be}from"./tags.service-CiHqWB4p.js";import{f as ke,p as Ce,a as Fe}from"./format-D2eluCP0.js";import{N as Se}from"./Newsletter-BETIhYln.js";import{B as te}from"./Button-CKoLZZEW.js";import{b as K}from"./article.service-z7ufy3mB.js";import{u as g}from"./useArticle-B34IiWbX.js";import{p as $e}from"./Helmet-DoXJ-fYk.js";import"./index-zMJ_-Hqf.js";import"./index-BWQaD3Lf.js";import"./newsletter.service-BcMzdv_k.js";const{Helmet:Ee}=$e,Q="http://localhost:8080",Y="http://localhost:8080",Ae=({article:r})=>{var s;const{getCategoryById:l}=ee(),{getFeaturedImageUrl:t,getPermalink:d}=g();return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"image-wrapper mb-5",children:e.jsx(u,{ratio:"62%",url:t(r),link:d(r)})}),e.jsx("div",{className:"category-wrapper",children:e.jsx("p",{className:"uppercase text-front-red",children:(s=l(r==null?void 0:r.category_id))==null?void 0:s.title})}),e.jsx("div",{className:"title-wrapper",children:e.jsx(se,{to:d(r),children:e.jsx("p",{className:"text-front-subtitle font-serif",children:r.title})})})]})},Me=({articles:r,theArticle:l})=>{const{getCategoryById:t}=ee(),{getFeaturedImageUrl:d,getPermalink:s}=g();if(!l)return;const x=r.filter(i=>i.id!=l.id);return x.length==10&&x.pop(),e.jsx(e.Fragment,{children:e.jsxs("div",{id:"related-articles",className:"relative pb-12",children:[e.jsx("div",{className:"swiper-pagination"}),e.jsx(Ne,{slidesPerView:4,spaceBetween:40,modules:[ye],pagination:{el:"#related-articles .swiper-pagination",enabled:!0,clickable:!0},children:x.map(i=>{var h;return e.jsxs(we,{children:[e.jsx("div",{className:"image-wrapper mb-5 line-right-5",children:e.jsx(u,{url:d(i),link:s(i),ratio:"100%"})}),e.jsx("div",{className:"category-wrapper mb-1",children:e.jsx("p",{className:"",children:(h=t(i==null?void 0:i.category_id))==null?void 0:h.title})}),e.jsx("div",{className:"title-wrapper",children:e.jsx(se,{to:s(i),children:e.jsx("p",{className:"font-serif text-front-title",children:i.title})})})]})})})]})})},D=r=>{let l="AM";const[t,d]=r.split(":");let s=Number(t);if(!(!t||!d))return Number(t)>11&&(l="PM",s=Number(t)==12?12:Number(t)-12),`${s}${l}`},Be=r=>{if(!r)return;const l=Ce(r);return Fe(l,"EEEE, d MMMM yyyy")},j=({article:r})=>r?e.jsx("div",{className:"mb-4",children:e.jsx(te,{text:"Edit article",link:`/admin/mst_article/edit/${r.id}`})}):e.jsx(e.Fragment,{}),Qe=()=>{var _,N,w,y,b,k,C,F,S,$,E,A,M,B,L,I,P,T,H,R,V,W,U,Z,z,G,O,X;const{initialData:r}=oe(),{setNotification:l}=xe(),{actualRoute:t}=me(),{getFeaturedImageUrl:d}=g(),[s,x]=o.useState((r==null?void 0:r.article)??void 0),[i,h]=o.useState((r==null?void 0:r.related)??[]),[f,re]=o.useState((r==null?void 0:r.discover)??[]),[m,ae]=o.useState(),[v,ie]=o.useState([]),{userDetails:c}=pe(),le=()=>{if((c==null?void 0:c.user_level)=="super_admin")return e.jsx(j,{article:s});if((c==null?void 0:c.user_level)=="admin_country"&&(s==null?void 0:s.id_country)==c.id_country)return e.jsx(j,{article:s});if((c==null?void 0:c.user_level)=="admin_city"&&(s==null?void 0:s.id_city)==c.id_city)return e.jsx(j,{article:s})};o.useEffect(()=>{(async()=>{var n,p,q;try{if((n=s==null?void 0:s.tags)!=null&&n.length){const a=await be(s==null?void 0:s.tags);a&&ie(a)}}catch(a){console.log(a)}try{const a=await K({category:(p=t==null?void 0:t.category)==null?void 0:p.id,limit:11});a!=null&&a.articles&&h(a.articles)}catch(a){console.log(a)}try{const a=await K({id_country:(q=t==null?void 0:t.country)==null?void 0:q.id,limit:4});a!=null&&a.articles&&re(a.articles)}catch(a){console.log(a)}})()},[s]),o.useEffect(()=>{ae(window.location.href),x(t.article)},[]);const ce=async()=>{m&&(await navigator.clipboard.writeText(m),l({message:"Copied URL to clipboard",type:"neutral"}))},ne=()=>{if(v.length)return v.map(n=>e.jsx("div",{className:"box px-8 py-2 bg-[#EEEEEE] uppercase",children:n.name}))},de=()=>{if(f){const n=f.filter(p=>p.id!=(s==null?void 0:s.id));return n.length==4&&n.pop(),n==null?void 0:n.map(p=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"discover-article-wrapper mb-6",children:e.jsx(Ae,{article:p})})}))}};return e.jsxs(e.Fragment,{children:[e.jsxs(Ee,{children:[e.jsxs("title",{children:[(_=t.article)==null?void 0:_.title," - Whatsnew Asia"]}),e.jsx("meta",{name:"description",content:(N=t.article)==null?void 0:N.sub_title}),e.jsx("link",{rel:"canonical",href:`${Q}/${(w=t.country)==null?void 0:w.slug}/${(y=t.category)==null?void 0:y.slug_title}/${(b=t.article)==null?void 0:b.slug}`}),e.jsx("meta",{property:"og:type",content:"article"}),e.jsx("meta",{property:"og:title",content:`${(k=t.article)==null?void 0:k.title} - Whatsnew Asia`}),e.jsx("meta",{property:"og:description",content:(C=t.article)==null?void 0:C.sub_title}),e.jsx("meta",{property:"og:url",content:`${Q}/${(F=t.country)==null?void 0:F.slug}/${(S=t.category)==null?void 0:S.slug_title}/${($=t.article)==null?void 0:$.slug}`}),e.jsx("meta",{property:"og:image",content:`${Y}/${((E=t.article)==null?void 0:E.featured_image_16_9_url)||((A=t.article)==null?void 0:A.featured_image_url)||"images/placeholder.png"}`}),e.jsx("meta",{property:"og:site_name",content:"Whatsnew Asia"}),e.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),e.jsx("meta",{name:"twitter:title",content:`${(M=t.article)==null?void 0:M.title} - Whatsnew Asia`}),e.jsx("meta",{name:"twitter:description",content:(B=t.article)==null?void 0:B.sub_title}),e.jsx("meta",{name:"twitter:image",content:`${Y}/${((L=t.article)==null?void 0:L.featured_image_16_9_url)||((I=t.article)==null?void 0:I.featured_image_url)||"images/placeholder.png"}`})]}),e.jsxs("article",{children:[e.jsx("div",{className:"container",children:e.jsxs("div",{className:"grid grid-cols-12 lg:gap-x-10 py-12",children:[e.jsx("div",{className:"lg:col-span-8 lg:col-start-3 col-span-12 mb-12",children:e.jsx(J,{})}),e.jsx("div",{className:"col-span-12 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"item",children:e.jsx("p",{className:"text-[#222222]",children:ke(s==null?void 0:s.updatedAt)})}),e.jsx("div",{className:"item",children:e.jsx(he,{className:"cursor-pointer",onClick:ce})})]})}),e.jsxs("div",{className:"lg:col-span-9 col-span-12",children:[e.jsx("div",{className:"thumbnail-wrapper mb-6",children:e.jsx(u,{url:d(s??void 0),ratio:"56.25%",isLazy:!1,fetchPriority:"high"})}),e.jsxs("div",{className:"author-wrapper flex justify-between mb-6 items-center",children:[e.jsx("div",{className:"item",children:e.jsxs("p",{children:["By ",s==null?void 0:s.author_name]})}),e.jsx("div",{className:"item flex gap-x-4",children:ne()})]}),e.jsx("div",{className:"title-wrapper mb-6",children:e.jsx("h1",{className:"text-front-article-title font-serif",children:s==null?void 0:s.title})}),e.jsxs("div",{className:"date-information mb-8",children:[((P=s==null?void 0:s.meta_data)==null?void 0:P.start_date)||((T=s==null?void 0:s.meta_data)==null?void 0:T.start_time)&&e.jsx("div",{className:"title mb-4",children:e.jsx("p",{className:"text-front-subtitle font-serif",children:"Date & Time"})}),((H=s==null?void 0:s.meta_data)==null?void 0:H.start_date)&&e.jsxs("div",{className:"item flex gap-x-4 mb-2",children:[e.jsx("div",{className:"icon",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"14",viewBox:"0 0 15 14",fill:"none",children:[e.jsx("path",{d:"M1.125 4.14229C1.125 3.17103 1.91236 2.38367 2.88362 2.38367H12.1164C13.0877 2.38367 13.875 3.17103 13.875 4.14229V11.6164C13.875 12.5877 13.0877 13.375 12.1164 13.375H2.88362C1.91236 13.375 1.125 12.5877 1.125 11.6164V4.14229Z",stroke:"#7F7F7F","stroke-width":"0.9","stroke-linecap":"round","stroke-linejoin":"round"}),e.jsx("path",{d:"M3.98267 0.624878V3.70246",stroke:"#7F7F7F","stroke-width":"0.9","stroke-linecap":"round","stroke-linejoin":"round"}),e.jsx("path",{d:"M11.0173 0.624878V3.70246",stroke:"#7F7F7F","stroke-width":"0.9","stroke-linecap":"round","stroke-linejoin":"round"}),e.jsx("path",{d:"M3.76294 5.90027H11.2371",stroke:"#7F7F7F","stroke-width":"0.9","stroke-linecap":"round","stroke-linejoin":"round"})]})}),e.jsx("div",{className:"text",children:(R=s==null?void 0:s.meta_data)!=null&&R.start_date?Be(`${(V=s==null?void 0:s.meta_data)==null?void 0:V.start_date}`):"Saturday, 16 September 2025"})]}),((W=s==null?void 0:s.meta_data)==null?void 0:W.start_time)&&e.jsxs("div",{className:"item flex gap-x-4",children:[e.jsx("div",{className:"icon",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",children:[e.jsx("g",{"clip-path":"url(#clip0_670_5700)",children:e.jsx("path",{d:"M8.74994 0.625H6.24994C5.90619 0.625 5.62494 0.90625 5.62494 1.25C5.62494 1.59375 5.90619 1.875 6.24994 1.875H8.74994C9.09369 1.875 9.37494 1.59375 9.37494 1.25C9.37494 0.90625 9.09369 0.625 8.74994 0.625ZM7.49994 8.75C7.84369 8.75 8.12494 8.46875 8.12494 8.125V5.625C8.12494 5.28125 7.84369 5 7.49994 5C7.15619 5 6.87494 5.28125 6.87494 5.625V8.125C6.87494 8.46875 7.15619 8.75 7.49994 8.75ZM11.8937 4.61875L12.3624 4.15C12.5999 3.9125 12.6062 3.51875 12.3624 3.275L12.3562 3.26875C12.1124 3.025 11.7249 3.03125 11.4812 3.26875L11.0124 3.7375C10.0437 2.9625 8.82494 2.5 7.49994 2.5C4.49994 2.5 1.94994 4.975 1.87494 7.975C1.79369 11.15 4.33744 13.75 7.49994 13.75C10.6124 13.75 13.1249 11.2312 13.1249 8.125C13.1249 6.8 12.6624 5.58125 11.8937 4.61875ZM7.49994 12.5C5.08119 12.5 3.12494 10.5437 3.12494 8.125C3.12494 5.70625 5.08119 3.75 7.49994 3.75C9.91869 3.75 11.8749 5.70625 11.8749 8.125C11.8749 10.5437 9.91869 12.5 7.49994 12.5Z",fill:"#7F7F7F"})}),e.jsx("defs",{children:e.jsx("clipPath",{id:"clip0_670_5700",children:e.jsx("rect",{width:"15",height:"15",fill:"white"})})})]})}),e.jsxs("div",{className:"text",children:[(U=s==null?void 0:s.meta_data)!=null&&U.start_time?`${D(`${(Z=s==null?void 0:s.meta_data)==null?void 0:Z.start_time}`)} `:"",(z=s==null?void 0:s.meta_data)!=null&&z.end_time?`- ${D(`${(G=s==null?void 0:s.meta_data)==null?void 0:G.end_time}`)}`:""]})]})]}),e.jsxs("div",{className:"share-buttons-wrapper mb-8 flex items-center gap-x-5",children:[e.jsx("p",{children:"Share:"}),m&&e.jsxs(e.Fragment,{children:[e.jsx(je,{url:m,children:e.jsx(ue,{className:"w-[24px] h-[24px]"})}),e.jsx(ge,{url:m,children:e.jsx(fe,{className:"w-[24px] h-[24px]"})}),e.jsx(ve,{url:m,children:e.jsx(_e,{className:"w-[24px] h-[24px]"})})]})]}),e.jsx("div",{className:"content-wrapper mb-8",dangerouslySetInnerHTML:{__html:(s==null?void 0:s.article_post)??""}})]}),e.jsxs("div",{className:"lg:col-span-3 col-span-12",children:[le(),e.jsx("div",{className:"ads-wrapper mb-12",children:e.jsx(J,{ratio:"vertical"})}),de()]})]})}),e.jsx("div",{className:"outer bg-front-section-grey py-8",children:e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"title-wrapper mb-6 text-center",children:e.jsxs("p",{className:"font-serif text-front-main-title",children:[e.jsx("span",{className:"text-front-red",children:"Related"})," Articles"]})}),i&&e.jsx(Me,{articles:i,theArticle:s??null}),e.jsx("div",{className:"button-wrapper text-center pt-12 pb-8",children:e.jsx(te,{text:"VIEW ALL",link:`${(O=t.country)==null?void 0:O.slug}/${(X=t.category)==null?void 0:X.slug_title}`})}),e.jsx("div",{className:"py-8",children:e.jsx("hr",{style:{borderColor:"#5F5F5F"}})}),e.jsx(Se,{})]})})]})]})};export{Qe as default};
