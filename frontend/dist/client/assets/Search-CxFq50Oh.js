import{X as w,h as A,r as c,D as y,j as e}from"./chunk-JZWAC4HX-CJhxn-1v.js";import{A as b}from"./Advertisement-BEmpNNiq.js";import{u as P}from"./useArticle-B34IiWbX.js";import{I as k}from"./Image-26DLjn3y.js";import{T as F}from"./TextLink-CryvWszz.js";import{e as C}from"./article.service-z7ufy3mB.js";import{B as E}from"./Button-CKoLZZEW.js";import"./index-BWQaD3Lf.js";const I=({article:s})=>{const{getPermalink:t,getFeaturedImageUrl:a}=P();return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-12 mb-16 gap-6",children:[e.jsxs("div",{className:"md:col-span-6 col-span-12 order-2 md:order-1",children:[e.jsx("div",{className:"title-wrapper mb-6",children:e.jsx("p",{className:"text-front-article-title font-serif",children:s.title})}),e.jsx("div",{className:"subtitle-wrapper mb-6",children:e.jsx("p",{children:s.sub_title})}),e.jsx("div",{className:"button-wrapper",children:e.jsx(F,{link:t(s),color:"gray",text:"READ MORE"})})]}),e.jsx("div",{className:"md:col-span-6 col-span-12 order-1 md:order-2",children:e.jsx("div",{className:"image-wrapper",children:e.jsx(k,{link:t(s),url:a(s)})})})]})})},R=({content:s,q:t})=>{if(s&&s.length)return e.jsx(e.Fragment,{children:s==null?void 0:s.map(a=>e.jsx("div",{className:"article-card mb-8",children:e.jsx(I,{article:a})}))});if(t&&t.length<3)return e.jsx(e.Fragment,{children:"Keyword search need to have at least 3 characters"});if(t)return e.jsx(e.Fragment,{children:"Article not found"})},O=()=>{var d,m;const{initialData:s}=w(),{clientChange:t}=A(),[a,x]=c.useState((s==null?void 0:s.articles)??[]),[l,g]=c.useState(((d=s==null?void 0:s.pagination)==null?void 0:d.totalPages)??1),[n,u]=c.useState(((m=s==null?void 0:s.pagination)==null?void 0:m.page)??1),[h]=y(),i=h.get("q"),j=7;c.useEffect(()=>{!i||!t||(async()=>{const r=await C({keyword:i,page:n,limit:j});r!=null&&r.articles&&x(p=>{const N=r.articles.filter(o=>!p.some(v=>v.id===o.id)).map(o=>({...o}));return[...p,...N]}),r!=null&&r.pagination&&g(r.pagination.totalPages)})()},[n]);const f=()=>{n>l||u(r=>r+1)};return e.jsx(e.Fragment,{children:e.jsxs("section",{className:"py-12",children:[e.jsx("div",{className:"container",children:e.jsx(b,{})}),e.jsxs("div",{className:"container py-12",children:[e.jsx(R,{content:a,q:i}),n<l&&e.jsx("div",{className:"button-wrapper text-center py-8",children:e.jsx(E,{text:"Load More",onClick:f})})]})]})})};export{O as default};
