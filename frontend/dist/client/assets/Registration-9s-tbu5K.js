import{r as a,j as e,T as de,o as me,G as ue}from"./chunk-JZWAC4HX-BaRxOj3G.js";import{C as pe}from"./ComponentCard-Bj4wr1CG.js";import{I as j}from"./InputField-CxSLAK4_.js";import{L as l}from"./Label-CbHK8J5W.js";import{S as he}from"./download-ByCNwYf6.js";import{S as ye,a as ge}from"./eye-close-DJV1cPTu.js";import{S as u}from"./Select-Bsh2nSN_.js";import{B as ve}from"./Button-Daz7UfMq.js";import{u as B}from"./useTimedMessage-BwZa_Nir.js";import{A as U}from"./Alert-DqFGWyGV.js";import{M as fe,g as xe}from"./ModalTimezoneTable-Cze9eAYP.js";import{B as je}from"./admin-CjiJQ6Cc.js";import{u as Se}from"./useModal-CQMqfSBi.js";import"./index-DCyd9kTA.js";import"./NotificationContext-BWqXEdeR.js";import"./PageMeta-BgUgIrIo.js";import"./newsletter.service-ZKntKtau.js";import"./article.service-BgP4NldJ.js";import"./useArticle-DWTfMO-p.js";function Ze(){const[S,C]=a.useState(!1),[R,b]=a.useState(""),[p,Z]=a.useState(!1),[D,E]=a.useState(!1),[F,w]=a.useState(""),[h,c]=a.useState(""),[y,N]=a.useState(""),[g,z]=a.useState(""),[v,k]=a.useState(""),[f,T]=a.useState(""),[m,M]=a.useState("admin_country"),[x,P]=a.useState(0),[d,_]=a.useState(0),[O,I]=a.useState(""),[G,J]=a.useState([]),[V,$]=a.useState([]),[q,H]=a.useState([]),[K,Q]=a.useState([]);B(y,N),B(h,c);const{isOpen:W,openModal:X,closeModal:Y}=Se(),L=s=>{const t=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(s);return C(!1),b(""),t||(C(!0),b("Please input a valid email address")),t},A=s=>(E(!1),w(""),s.length<8&&(E(!0),w("Minimum Length 8 Character")),s),ee=s=>{const t=s.target.value;T(t),A(t)},se=s=>{const t=s.target.value;z(t),L(t)},ae=[{key:"admin_country",value:"admin_country",label:"Admin Country"},{key:"admin_city",value:"admin_city",label:"Admin City"}],te=s=>{M(String(s))},re=s=>{_(Number(s))},oe=s=>{P(Number(s))},ne=s=>{I(String(s))},ie=async s=>{var r,i;s.preventDefault();const t={email:g,name:v,password:f,user_level:m,id_country:d,id_city:x,timezone:O};try{if(!L(g))return;if(!v){c("Please Input Name");return}if(!A(f))return;if(!d){c("Please Select Country");return}if(m!=="admin_country"&&!x){c("Please Select City");return}await de(t),N("Register Success"),ce()}catch(o){throw o instanceof Error&&c(o.message),typeof o=="object"&&o!==null&&"response"in o&&c(((i=(r=o.response)==null?void 0:r.data)==null?void 0:i.message)??"Something went wrong"),o}},le=()=>{X()},ce=()=>{z(""),k(""),T(""),M(""),_(0),P(0),I("")};return a.useEffect(()=>{(async()=>{var t;try{const r=await me("country"),i={key:0,value:0,label:"Select Country"},o=((t=r.data)==null?void 0:t.map(n=>({key:n.id,value:n.id,label:n.name})))??[];J([i,...o])}catch(r){console.error(r)}})()},[]),a.useEffect(()=>{(async()=>{try{const r=(await xe()).data,i={key:0,value:0,label:"Select Timezone"},o=(r==null?void 0:r.map(n=>({key:n.id,value:n.timezone_name,label:n.timezone_name+" - ["+n.utc_offset+"]"})))??[];Q([i,...o]),H(r)}catch(t){console.error(t)}})()},[]),a.useEffect(()=>{(async()=>{var t;try{const r=await ue("city",d),i={key:0,value:0,label:"Select City"},o=((t=r.data)==null?void 0:t.map(n=>({key:n.id,value:n.id,label:n.name})))??[];$([i,...o])}catch(r){console.error(r)}})()},[d]),e.jsxs(e.Fragment,{children:[e.jsxs(pe,{title:"Register New User",children:[e.jsx("div",{className:"mb-5",children:h&&e.jsx(U,{variant:"error",title:"Error",message:h})}),e.jsx("div",{className:"mb-5",children:y&&e.jsx(U,{variant:"success",title:"Success",message:y})}),e.jsxs("form",{onSubmit:ie,children:[e.jsxs("div",{className:"space-y-5 space-x-6 grid grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(l,{children:"Name"}),e.jsx(j,{type:"text",value:v,placeholder:"John Doe",onChange:s=>k(s.target.value)})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Email"}),e.jsx(j,{type:"email",value:g,error:S,onChange:se,placeholder:"Enter your email",hint:S?R:""})]})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx(l,{children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(j,{type:p?"text":"password",placeholder:"Enter your password",value:f,onChange:ee,error:D,hint:D?F:""}),e.jsx("button",{onClick:()=>Z(!p),className:"absolute z-30 -translate-y-1/2 cursor-pointer right-4 top-1/2",children:p?e.jsx(ye,{className:"fill-gray-500 dark:fill-gray-400 size-5"}):e.jsx(ge,{className:"fill-gray-500 dark:fill-gray-400 size-5"})})]})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx(l,{children:"Select Input"}),e.jsx(u,{options:ae,value:m,placeholder:"Select Option",onChange:te,className:"dark:bg-dark-900"},m)]}),e.jsxs("div",{className:"grid grid-cols-2 gap-5 mb-5",children:[e.jsxs("div",{children:[e.jsx(l,{children:"Country"}),e.jsx(u,{options:G,value:d,placeholder:"Select Country...",onChange:re,className:"dark:bg-dark-900"})]}),e.jsxs("div",{children:[e.jsx(l,{children:"City"}),e.jsx(u,{options:V,value:x,placeholder:"Select City...",onChange:oe,className:"dark:bg-dark-900"})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-5 mb-5",children:e.jsxs("div",{children:[e.jsxs(l,{children:[e.jsx("span",{className:"mr-2",children:"Time Zone"}),e.jsx(je,{color:"info",onClick:le,children:"?"})]}),e.jsx(u,{options:K,value:O,placeholder:"Select Timezone...",onChange:ne,className:"dark:bg-dark-900"})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsx(ve,{startIcon:e.jsx(he,{className:"size-5"}),className:"w-1/4",children:"Save"})})]})]}),e.jsx(fe,{isOpen:W,onCLose:Y,timezonesData:q})]})}export{Ze as default};
