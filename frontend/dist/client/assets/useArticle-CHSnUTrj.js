import{b as w}from"./chunk-JZWAC4HX-DGixXWWH.js";import{b as A}from"./article.service-Cf6EYyU8.js";const B="http://34.124.244.233/whatsnewasia",p="http://34.124.244.233/whatsnewasia",E=()=>{const{getCountryById:g,getCategoryById:_,getRegionById:m,getCityById:c,taxonomies:d}=w(),h={title:"this will fill automatically",sub_title:"you only see this on admin page, user wont see this"},y=e=>_(e.category_id),$=e=>{var s,r;return`/${(s=g(e.id_country))==null?void 0:s.slug}/${(r=y(e))==null?void 0:r.slug_title}/${e.slug}`},I=async e=>{const s=new URLSearchParams;Object.keys(e).forEach(o=>{var a;const i=o;if(e[i])if(i=="exclude_category"){const t=e[i].map(n=>{var l,f;return(f=(l=d.categories)==null?void 0:l.find(C=>C.slug_title==n))==null?void 0:f.id}),u=(a=d.categories)==null?void 0:a.filter(n=>{var l;return!((l=e[i])!=null&&l.includes(n.slug_title))});u==null||u.filter(n=>!t.includes(n==null?void 0:n.id_parent)).forEach(n=>{s.append("category[]",`${n.id}`)})}else Array.isArray(e[i])?e[i].forEach(t=>{t&&s.append(`${o}[]`,`${t}`)}):s.append(o,`${e[i]}`)});const r=await A({},s);if(r!=null&&r.articles)return r.articles};return{getCategory:y,getPermalink:$,getFeaturedImageUrl:(e,s=null)=>e?s&&e[`featured_image_${s}_url`]?`${p}/${e[`featured_image_${s}_url`]}`:e.featured_image_url?`${p}/${e.featured_image_url}`:`${B}/images/placeholder.png`:"",generateContent:async({content:e,admin:s=!1,query:r={}})=>{if(!e.filter(t=>t==0).length)return e;const o=e.length;let i=[];const a=e.filter(t=>!!t).map(t=>t.id);if(s)for(let t=0;o>t;t++)i.push(h);else{const t=await I({...r,limit:o,status:["published"]});t&&(i=t.filter(u=>!a.includes(u.id)))}return e.map(t=>t||(i.shift()??void 0))},getDeepestLocation:(e,s)=>{if(!e)return;let r=[];if(s=="city"){const t=c(e.id_city);r.push(t);const u=g(e.id_country);return r.push(u),r.filter(Boolean)[0]}const o=m(e.id_region);r.push(o);const i=c(e.id_city);r.push(i);const a=g(e.id_country);return r.push(a),r.filter(Boolean)[0]}}};export{E as u};
