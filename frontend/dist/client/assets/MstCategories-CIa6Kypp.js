import{r as o,j as e,o as ce,p as Z,q as de,s as xe,t as ge,v as he,w as me}from"./chunk-JZWAC4HX-CJhxn-1v.js";import{P as ue}from"./PageMeta-BV4yoibv.js";import{C as ee}from"./ComponentCard-C4EWCTcj.js";import{I as A}from"./InputField-BzPVlfav.js";import{L as p}from"./Label-DAhUyyCs.js";import{B as $}from"./Button-BSlodQCJ.js";import{S as Y}from"./Select-CAqBW0Os.js";import{T as pe}from"./TextArea-EQ8nGACC.js";import{R as B}from"./Radio-DN2YnlDj.js";import{A as J}from"./Alert-D2eRQLh0.js";import{t as Q}from"./slugify-BCf0ZNXp.js";import{u as V}from"./useTimedMessage-BKP6J-G3.js";import{S as ye}from"./react-select.esm-BcxET3Y_.js";import{g as be}from"./tags.service-CiHqWB4p.js";import{c as fe}from"./createLucideIcon-DTxeq6k1.js";import{T as je,a as ve,b as X,c,d as we}from"./index-D0lLYbpS.js";import{S as O}from"./sweetalert2.esm.all-BbQndx0i.js";import{w as K}from"./sweetalert2-react-content.es-SO4eO7oB.js";import{P as Se}from"./PaginationWithButton-BX2bix7V.js";import{P as ke}from"./PageBreadCrumb-BeeDKLN3.js";import"./createSuper-DL59XKfk.js";/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Ce=fe("info",Ne),Te=({message:s})=>e.jsxs("div",{className:"relative inline-block group",children:[e.jsx(Ce,{}),e.jsx("div",{className:"invisible absolute w-48 text-wrap z-50 bottom-full left-1/2 mb-2.5 border border-black -translate-x-1/2 opacity-0 transition-opacity duration-300 group-hover:visible group-hover:opacity-100",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"drop-shadow-4xl whitespace-nowrap rounded-lg bg-white px-3 py-2 text-md font-medium text-gray-700 dark:bg-[#1E2634] dark:text-white",children:s}),e.jsx("div",{className:"absolute -bottom-1 left-1/2 h-3 w-4 -translate-x-1/2 rotate-45 bg-white dark:bg-[#1E2634]"})]})})]}),De=({label:s,children:y,tooltip:g})=>e.jsxs("div",{className:"input-wrapper",children:[e.jsxs("div",{className:"label-wrapper mb-4 flex gap-x-2 items-center",children:[e.jsx("p",{children:s}),g&&e.jsx(Te,{message:g})]}),y]});function Le({selectedCategory:s,clearSelected:y,onSaveSuccess:g,refreshKey:h}){const[d,m]=o.useState(""),[L,x]=o.useState(""),[P,u]=o.useState(""),[_,S]=o.useState(""),[M,R]=o.useState([]),[N,b]=o.useState(0),[E,C]=o.useState(""),[f,j]=o.useState(null),[T,t]=o.useState(null),[r,v]=o.useState("global"),[w,k]=o.useState([]),[D,H]=o.useState(0),[te,ae]=o.useState(!1);o.useEffect(()=>{s&&(console.log("selectedCategory",typeof s.is_child),m(s.title),x(s.sub_title),u(s.slug_title),S(s.description),b(s.id_parent),C(s.template_name),z(s.tag??[]),ae(s.is_child))},[s]),o.useEffect(()=>{(async()=>{var i;try{const n={key:0,value:0,label:"Select Location"};let l;if(r!=="global"){l=await ce(r);const U=((i=l.data)==null?void 0:i.map(W=>({key:W.id,value:W.id,label:W.name})))??[];k([n,...U])}else k([n])}catch(n){throw console.error(n),n}})()},[r]),o.useEffect(()=>{(async()=>{try{const n=(await Z()).data.map(l=>({value:l.id,label:l.title}));R(n)}catch(i){console.error("Error fetching data:",i)}})()},[h]);const re=async a=>{var i,n;a.preventDefault();try{const l={title:d,sub_title:L,slug_title:Q(P),description:_,id_parent:N,template_name:E,tag:G};if(r!=="global"){if(!D){j("Please Select Location");return}r==="country"?l.id_country=D:r==="city"?l.id_city=D:r==="region"&&(l.id_region=D)}s?(await de(s.id,l),t(d+" is Updated Successfully")):(await xe(l),t(d+" is Created Successfully")),y(),t(d+" is Created Successfully"),m(""),x(""),u(""),S(""),b(0),C(""),H(0),v("global"),z([]),g()}catch(l){l instanceof Error&&j(l.message),typeof l=="object"&&l!==null&&"response"in l&&j(((n=(i=l.response)==null?void 0:i.data)==null?void 0:n.message)??"Something went wrong"),window.scrollTo({top:0,behavior:"smooth"})}},se=a=>{const i=a.target.value,n=s?s.slug_title:Q(i);m(i),u(n)},q=async a=>{if(H(Number(a)),s)try{const n=(await ge(r,Number(a),s.id)).data;S(n.description),x(n.sub_title)}catch(i){throw console.error(i),i}},oe=a=>{b(Number(a))},I=async a=>{v(a),H(0),await q(0)};V(T,t),V(f,j);const[F,ie]=o.useState([]),[G,z]=o.useState([]);o.useEffect(()=>{(async()=>{try{const i=await be();ie(i.data)}catch(i){console.error(i)}})()},[]);const le=a=>{z(a.map(i=>i.value))},ne=()=>{if(!(!F.length||te))return e.jsx(De,{label:"Related Tags",children:e.jsx(ye,{options:F.map(a=>({label:a.name,value:a.id})),isMulti:!0,onChange:le,value:F.filter(a=>G.includes(a.id)).map(a=>({value:a.id,label:a.name}))})})};return e.jsx(e.Fragment,{children:e.jsxs(ee,{title:s?"Edit Category":"Add Category",children:[e.jsx("div",{className:"mb-5",children:f&&e.jsx(J,{variant:"error",title:"Error",message:f})}),e.jsx("div",{className:"mb-5",children:T&&e.jsx(J,{variant:"success",title:"Success",message:T})}),e.jsx("form",{onSubmit:re,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"cCategoryTitle",children:"Category Title"}),e.jsx(A,{type:"text",id:"cCategoryTitle",onChange:se,value:d,placeholder:"Acme"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"cSlug",children:"Slug"}),e.jsx(A,{type:"text",id:"cSlug",onChange:a=>u(a.target.value),value:P,placeholder:"slug-category"})]}),e.jsxs("div",{children:[e.jsx(p,{children:"Location Type"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-8",children:[e.jsx(B,{id:"optLocationType_global",name:"group1",value:"global",checked:r==="global",onChange:I,label:"Global"}),e.jsx(B,{id:"optLocationType_country",name:"group1",value:"country",checked:r==="country",onChange:I,label:"Country"}),e.jsx(B,{id:"optLocationType_city",name:"group1",value:"city",checked:r==="city",onChange:I,label:"City"}),e.jsx(B,{id:"optLocationType_region",name:"group1",value:"region",checked:r==="region",onChange:I,label:"Region"})]})]}),e.jsxs("div",{children:[e.jsx(p,{children:"Location"}),e.jsx(Y,{options:w,value:D,placeholder:"Select Location",onChange:q,className:"h-lg dark:bg-dark-900"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"cCategorySubTitle",children:"Category Sub Title"}),e.jsx(A,{type:"text",id:"cCategorySubTitle",onChange:a=>x(a.target.value),value:L,placeholder:"Sub Title..."})]}),e.jsxs("div",{children:[e.jsx(p,{children:"Description"}),e.jsx(pe,{value:_,onChange:a=>S(a),rows:6,placeholder:"Enter Description..."})]}),e.jsxs("div",{children:[e.jsx(p,{children:"ID Parent"}),e.jsx(Y,{options:[{value:0,label:"-"},...M],value:N,placeholder:"Select an option",onChange:oe,className:"h-lg dark:bg-dark-900"})]}),e.jsxs("div",{children:[e.jsx(p,{children:"Template Name"}),e.jsx(A,{type:"text",id:"cTemplateName",onChange:a=>C(a.target.value),value:E,placeholder:"Template Name..."})]}),ne(),e.jsx("div",{className:"flex justify-end",children:e.jsx($,{className:"w-1/3",children:"Save"})})]})})]})})}function Pe({refreshKey:s,onEditCategory:y,onSaveSuccess:g}){const[h,d]=o.useState([]),[m,L]=o.useState(1),[x,P]=o.useState(5),[u,_]=o.useState("");o.useEffect(()=>{(async()=>{try{const r=await Z();d(r.data)}catch(r){console.error("Error fetching data:",r)}})()},[s]);async function S(t){try{const r=await he(t);y(r.data),window.scrollTo({top:0,behavior:"smooth"})}catch(r){console.error("Error fetching data:",r)}}async function M(t){var r,v;try{await me(t),g(),K(O).fire({title:"Deleted!",text:"Category has been deleted.",icon:"success"})}catch(w){console.error("Error deleting category:",w);let k="Failed to delete category";(v=(r=w.response)==null?void 0:r.data)!=null&&v.message?k=w.response.data.message:w.message&&(k=w.message),K(O).fire({title:"Error",text:k,icon:"error"})}}const R=(t,r)=>{K(O).fire({title:`Are you sure to Delete ${t}?`,text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0}).then(v=>{v.isConfirmed&&M(r)})},N=o.useMemo(()=>h.filter(t=>[t.title,t.slug_title,t.sub_title].some(r=>r==null?void 0:r.toLowerCase().includes(u.toLowerCase()))),[h,u]),b=N.length,E=Math.ceil(b/x),C=t=>{L(t)},f=(m-1)*x,j=Math.min(f+x,b),T=N.slice(f,j);return e.jsx(e.Fragment,{children:e.jsx(ee,{title:"Category Datas",children:e.jsxs("div",{className:"overflow-hidden rounded-xl border border-gray-200 bg-white dark:border-white/[0.05] dark:bg-white/[0.03]",children:[e.jsxs("div",{className:"flex flex-col gap-2 px-4 py-4 border border-b-1 border-gray-100 dark:border-white/[0.05] rounded-t-xl sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:" Show "}),e.jsxs("div",{className:"relative z-20 bg-transparent",children:[e.jsx("select",{className:"w-full py-2 pl-3 pr-8 text-sm text-gray-800 bg-transparent border border-gray-300 rounded-lg appearance-none dark:bg-dark-900 h-9 bg-none shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800",value:x,onChange:t=>P(Number(t.target.value)),children:[5,10].map(t=>e.jsx("option",{value:t,className:"text-gray-500 dark:bg-gray-900 dark:text-gray-400",children:t},t))}),e.jsx("span",{className:"absolute z-30 text-gray-500 -translate-y-1/2 right-2 top-1/2 dark:text-gray-400",children:e.jsx("svg",{className:"stroke-current",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M3.8335 5.9165L8.00016 10.0832L12.1668 5.9165",stroke:"",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),e.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:[" ","entries"," "]})]}),e.jsx("input",{type:"text",placeholder:"Search...",className:"px-3 py-2 text-sm border rounded-lg dark:bg-gray-800 dark:text-white",value:u,onChange:t=>_(t.target.value)})]}),e.jsx("div",{className:"max-w-full overflow-x-auto",children:e.jsxs(je,{children:[e.jsx(ve,{className:"border-b border-l-amber-800 dark:border-white/[0.05]",children:e.jsxs(X,{children:[e.jsx(c,{isHeader:!0,className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-sm dark:text-gray-400 max-w-[10px]",children:"Title"}),e.jsx(c,{isHeader:!0,className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-sm dark:text-gray-400",children:"Sub Title"}),e.jsx(c,{isHeader:!0,className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-sm dark:text-gray-400",children:"Slug"}),e.jsx(c,{isHeader:!0,className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-sm dark:text-gray-400",children:"Parent Category"}),e.jsx(c,{isHeader:!0,className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-sm dark:text-gray-400",children:"Edit?"}),e.jsx(c,{isHeader:!0,className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-sm dark:text-gray-400",children:"Delete"})]})}),e.jsx(we,{className:"divide-y divide-gray-100 dark:divide-white/[0.05]",children:T.map(t=>e.jsxs(X,{children:[e.jsx(c,{className:"px-4 py-3 text-gray-500 text-start text-theme-lg dark:text-gray-400",children:t.title}),e.jsx(c,{className:"px-4 py-3 text-gray-500 text-start text-theme-lg dark:text-gray-400",children:t.sub_title}),e.jsx(c,{className:"px-4 py-3 text-gray-500 text-start text-theme-lg dark:text-gray-400",children:t.slug_title}),e.jsx(c,{className:"px-4 py-3 text-gray-500 text-start text-theme-lg dark:text-gray-400",children:t.parent}),e.jsx(c,{className:"px-4 py-3 text-gray-500 text-start text-theme-lg dark:text-gray-400",children:e.jsx($,{onClick:()=>S(t.id),size:"sm",className:"bg-green-600 hover:bg-green-700",children:"Edit"})}),e.jsx(c,{className:"px-4 py-3 text-gray-500 text-start text-theme-lg dark:text-gray-400",children:e.jsx($,{onClick:()=>R(t.title,t.id),size:"sm",className:"bg-red-400 hover:bg-red-700",children:"Delete"})})]},t.id))})]})}),e.jsx("div",{className:"border border-t-1 rounded-b-xl border-gray-100 py-4 pl-[18px] pr-4 dark:border-white/[0.05]",children:e.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between",children:[e.jsx("div",{className:"pt-3 xl:pt-0",children:e.jsxs("p",{className:"pt-3 text-sm font-medium text-center text-gray-500 border-t border-gray-100 dark:border-gray-800 dark:text-gray-400 xl:border-t-0 xl:pt-0 xl:text-left",children:["Showing ",f+1," to ",j," of ",b," entries"]})}),e.jsx(Se,{totalPages:E,initialPage:m,onPageChange:C})]})})]})})})}function Xe(){const[s,y]=o.useState(0),[g,h]=o.useState(null);function d(){y(m=>m+1),h(null)}return e.jsxs("div",{children:[e.jsx(ue,{title:"Whats New Asia Admin Dashboard | Master Categories",description:"This is Master Categories Dashboard page for Whats New Asia Admin Dashboard Template"}),e.jsx("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-1",children:e.jsxs("div",{className:"space-y-12",children:[e.jsx(ke,{pageTitle:"Master Categories"}),e.jsx(Le,{selectedCategory:g,onSaveSuccess:d,clearSelected:()=>h(null),refreshKey:s}),e.jsx(Pe,{refreshKey:s,onEditCategory:h,onSaveSuccess:d})]})})]})}export{Xe as default};
