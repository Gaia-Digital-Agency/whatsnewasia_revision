import{r as a,j as e}from"./chunk-JZWAC4HX-CxGh2Gxx.js";import{P as O}from"./PageBreadCrumb-DW_siipK.js";import{P as K}from"./PageMeta-B5TRooE1.js";import{I as M}from"./InputField-DA8OIelJ.js";import{L as A}from"./Label-C4_1yZch.js";import{B}from"./Button--HbAVftr.js";import{A as F}from"./Alert-C0X0X6mW.js";import{S as U}from"./download-Dz93--YG.js";import{c as Y,e as _,g as q,a as G,d as J}from"./tags.service-D6DweeWs.js";import{u as L}from"./useTimedMessage-DWdBIWEZ.js";import{t as R}from"./slugify-DZ40w8AX.js";import{A as Q}from"./FeaturedImage-BPUrwdEP.js";import{u as V}from"./useModal-D_r8d8wF.js";import{u as X}from"./useNavigationPrompt-lcXHQsQA.js";import{T as Z,a as ee,b as $,c as d,d as te}from"./index-DCzdyFLt.js";import{B as re}from"./Badge-2x3-nqzU.js";import{w as z}from"./sweetalert2-react-content.es-BWLOemDH.js";import{S as H}from"./sweetalert2.esm.all-BbQndx0i.js";import{P as ae}from"./PaginationWithButton-KhGnEmSn.js";import{C as se}from"./ComponentCard-C_3qlk9J.js";import{S as oe}from"./pencil-oea8ax43.js";import{S as ne}from"./list-BSBEAC78.js";import"./index-Cf1TiTbD.js";import"./media.service-o8AQdxDz.js";import"./MediaForm-BzlJ05xn.js";import"./index-RK8lyzCV.js";import"./index-BN9qmei8.js";import"./createLucideIcon-7IXI4zfk.js";const W="http://34.124.244.233";function ie({selectedTags:n,onRefresh:p}){const[u,m]=a.useState(null),[b,g]=a.useState(null),[c,l]=a.useState(""),[x,h]=a.useState(""),[w,k]=a.useState(!1),[T,S]=a.useState(0),[i,y]=a.useState(),{closeModal:C,openModal:D}=V(!1),{setBlock:f}=X();a.useEffect(()=>{var o;if((o=n==null?void 0:n.data)!=null&&o.length){const s=n.data[0];l(s.name??""),h(s.slug??""),y({url:`${W}/${s.icon}`,id:s.id}),S(s.id??0),k(!0)}},[n]),L(b,g),L(u,m);const v=()=>{l(""),h(""),y({url:"",id:void 0})},P=async o=>{var N,I;o.preventDefault();const s={name:c,slug:R(x),icon:i==null?void 0:i.id};try{console.log(s),console.log(i),w?(await _(T,s),g(c+" is Created Successfully")):(await Y(s),g(c+" is Created Successfully")),v(),p()}catch(j){j instanceof Error&&m(j.message),typeof j=="object"&&j!==null&&"response"in j&&m(((I=(N=j.response)==null?void 0:N.data)==null?void 0:I.message)??"Something went wrong")}},t=o=>{const s=o.target.value,N=w?x:R(s);l(s),h(N)},r=({label:o,children:s})=>e.jsxs("div",{className:"input-wrapper",children:[e.jsx(A,{children:o}),s]}),E=o=>{y({url:`${W}/${o.path}`,id:o.id}),C(),f(!0)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-5",children:u&&e.jsx(F,{variant:"error",title:"Error",message:u})}),e.jsx("div",{className:"mb-5",children:b&&e.jsx(F,{variant:"success",title:"Success",message:b})}),e.jsxs("form",{onSubmit:P,children:[e.jsxs("div",{className:"space-y-6 space-x-6 grid grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"cTagTitle",children:"Tag Title"}),e.jsx(M,{type:"text",id:"cTagTitle",onChange:t,value:c,placeholder:"Dog Friendly"})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"cTagTitle",children:"Slug"}),e.jsx(M,{type:"text",id:"cTagTitle",onChange:o=>h(o.target.value),value:x,placeholder:"dog-friendly"})]})]}),e.jsx("div",{className:"w-50 h-50",children:e.jsx(r,{label:"Icon",children:e.jsx(Q,{url:i!=null&&i.url?`${i==null?void 0:i.url}`:"#",onClick:D,onSave:E})})}),e.jsx("div",{className:"flex justify-end",children:e.jsx(B,{startIcon:e.jsx(U,{className:"size-5"}),className:"w-1/4",children:"Save"})})]})]})}function le({onEditTags:n,refreshKey:p,onRefresh:u}){const[m,b]=a.useState([]),[g,c]=a.useState(1),[l,x]=a.useState(5),[h,w]=a.useState("");a.useEffect(()=>{(async()=>{try{const r=await q();b(r.data??[])}catch(r){console.error("Error fetching data:",r)}})()},[p]);const k=a.useMemo(()=>m.filter(t=>[t.name,t.slug].some(r=>r==null?void 0:r.toLowerCase().includes(h.toLowerCase()))),[m,h]),T=async t=>{try{const r=await G(t);n(r),window.scrollTo({top:0,behavior:"smooth"})}catch(r){throw console.error(r),r}},S=async t=>{try{await J(t),u()}catch(r){throw console.error(r),r}},i=(t,r)=>{z(H).fire({title:`Are you sure to Delete ${t}?`,text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0}).then(E=>{E.isConfirmed&&(S(r),z(H).fire({title:"Deleted!",text:"Tag has been deleted.",icon:"success"}))})},y=k.length,C=Math.ceil(y/l),D=t=>{c(t)},f=(g-1)*l,v=Math.min(f+l,y),P=k.slice(f,v);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"overflow-hidden rounded-xl border border-gray-200 bg-white dark:border-white/[0.05] dark:bg-white/[0.03]",children:[e.jsxs("div",{className:"flex flex-col gap-2 px-4 py-4 border border-b-1 border-gray-100 dark:border-white/[0.05] rounded-t-xl sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:" Show "}),e.jsxs("div",{className:"relative z-20 bg-transparent",children:[e.jsx("select",{className:"w-full py-2 pl-3 pr-8 text-sm text-gray-800 bg-transparent border border-gray-300 rounded-lg appearance-none dark:bg-dark-900 h-9 bg-none shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800",value:l,onChange:t=>x(Number(t.target.value)),children:[5,10].map(t=>e.jsx("option",{value:t,className:"text-gray-500 dark:bg-gray-900 dark:text-gray-400",children:t},t))}),e.jsx("span",{className:"absolute z-30 text-gray-500 -translate-y-1/2 right-2 top-1/2 dark:text-gray-400",children:e.jsx("svg",{className:"stroke-current",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M3.8335 5.9165L8.00016 10.0832L12.1668 5.9165",stroke:"",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:" entries "})]}),e.jsx("input",{type:"text",placeholder:"Search...",className:"px-3 py-2 text-sm border rounded-lg dark:bg-gray-800 dark:text-white",value:h,onChange:t=>w(t.target.value)})]}),e.jsx("div",{className:"max-w-full overflow-x-auto",children:e.jsxs(Z,{children:[e.jsx(ee,{className:"border-b border-l-amber-800 dark:border-white/[0.05]",children:e.jsxs($,{children:[e.jsx(d,{isHeader:!0,className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-sm dark:text-gray-400 max-w-[10px]",children:"#"}),e.jsx(d,{isHeader:!0,className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-sm dark:text-gray-400 max-w-[10px]",children:"Name"}),e.jsx(d,{isHeader:!0,className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-sm dark:text-gray-400",children:"Slug"}),e.jsx(d,{isHeader:!0,className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-sm dark:text-gray-400",children:"Edit?"}),e.jsx(d,{isHeader:!0,className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-sm dark:text-gray-400",children:"Delete"})]})}),e.jsx(te,{className:"divide-y divide-gray-100 dark:divide-white/[0.05]",children:P.map((t,r)=>e.jsxs($,{children:[e.jsx(d,{className:"px-4 py-3 text-gray-500 text-start text-theme-xl dark:text-gray-400",children:f+r+1}),e.jsx(d,{className:"px-4 py-3 text-gray-500 text-start text-theme-xl dark:text-gray-400",children:t.name}),e.jsx(d,{className:"px-4 py-3 text-gray-500 text-start text-theme-xl dark:text-gray-400",children:e.jsx(re,{variant:"light",color:"info",children:t.slug})}),e.jsx(d,{className:"px-4 py-3 text-gray-500 text-start text-theme-xl dark:text-gray-400",children:e.jsx(B,{onClick:()=>T(t.id),size:"sm",className:"bg-green-600 hover:bg-green-700",children:"Edit"})}),e.jsx(d,{className:"px-4 py-3 text-gray-500 text-start text-theme-xl dark:text-gray-400",children:e.jsx(B,{onClick:()=>i(t.name,t.id),size:"sm",className:"bg-red-400 hover:bg-red-700",children:"Delete"})})]},t.id))})]})}),e.jsx("div",{className:"border border-t-1 rounded-b-xl border-gray-100 py-4 pl-[18px] pr-4 dark:border-white/[0.05]",children:e.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between",children:[e.jsx("div",{className:"pt-3 xl:pt-0",children:e.jsxs("p",{className:"pt-3 text-sm font-medium text-center text-gray-500 border-t border-gray-100 dark:border-gray-800 dark:text-gray-400 xl:border-t-0 xl:pt-0 xl:text-left",children:["Showing ",f+1," to ",v," of ",y," entries"]})}),e.jsx(ae,{totalPages:C,initialPage:g,onPageChange:D})]})})]})})}function $e(){const[n,p]=a.useState("datas"),[u,m]=a.useState(),[b,g]=a.useState(0),c=()=>{g(x=>x+1)},l=x=>{m(x),p("form")};return e.jsxs("div",{children:[e.jsx(K,{title:"Whats New Asia Admin Dashboard | Master Tags",description:"This is Master Tags Dashboard page for Whats New Asia Admin Dashboard Template"}),e.jsx(O,{pageTitle:"Tags"}),e.jsx(se,{title:"",className:"mt-12",children:e.jsx("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-1",children:e.jsxs("div",{className:"space-y-12",children:[e.jsxs("nav",{className:"flex space-x-2 overflow-x-auto scrollbar-thin scrollbar-thumb-gray-200 dark:scrollbar-thumb-gray-600",children:[e.jsxs("button",{onClick:()=>p("datas"),className:`inline-flex items-center gap-2 border-b-2 px-2.5 py-2 text-sm font-medium transition-colors duration-200 ${n==="datas"?"text-brand-500 border-brand-500 dark:text-brand-400 dark:border-brand-400":"text-gray-500 border-transparent hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}`,children:[e.jsx(ne,{className:"size-5"}),"Data Tags"]}),e.jsxs("button",{onClick:()=>p("form"),className:`inline-flex items-center gap-2 border-b-2 px-2.5 py-2 text-sm font-medium transition-colors duration-200 ${n==="form"?"text-brand-500 border-brand-500 dark:text-brand-400 dark:border-brand-400":"text-gray-500 border-transparent hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}`,children:[e.jsx(oe,{className:"size-5"}),"Form"]})]}),n==="datas"&&e.jsx(le,{onEditTags:l,refreshKey:b,onRefresh:c}),n==="form"&&e.jsx(ie,{selectedTags:u,onRefresh:c})]})})})]})}export{$e as default};
