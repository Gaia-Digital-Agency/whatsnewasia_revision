import{X as A,h as N,r as c,D as y,j as e,Z as b}from"./chunk-JZWAC4HX-BaRxOj3G.js";import{A as P}from"./Advertisement-CEA8Jpfg.js";import{u as k}from"./useArticle-DWTfMO-p.js";import{I as F}from"./Image-Bf5TVGbM.js";import{T as S}from"./TextLink-57ssA8F6.js";import{e as C}from"./article.service-BgP4NldJ.js";import{B as E}from"./Button-dgVh7ntR.js";import"./index-ILMR5Vqc.js";const I=({article:s})=>{const{getPermalink:t,getFeaturedImageUrl:a}=k();return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-12 mb-16 gap-6",children:[e.jsxs("div",{className:"md:col-span-6 col-span-12 order-2 md:order-1",children:[e.jsx("div",{className:"title-wrapper mb-6",children:e.jsx("p",{className:"text-front-article-title font-serif",children:s.title})}),e.jsx("div",{className:"subtitle-wrapper mb-6",children:e.jsx("p",{children:s.sub_title})}),e.jsx("div",{className:"button-wrapper",children:e.jsx(S,{link:t(s),color:"gray",text:"READ MORE"})})]}),e.jsx("div",{className:"md:col-span-6 col-span-12 order-1 md:order-2",children:e.jsx("div",{className:"image-wrapper",children:e.jsx(F,{link:t(s),url:a(s)})})})]})})},R=({content:s,q:t})=>{if(s&&s.length)return e.jsx(e.Fragment,{children:s==null?void 0:s.map(a=>e.jsx("div",{className:"article-card mb-8",children:e.jsx(I,{article:a})}))});if(t&&t.length<3)return e.jsx(e.Fragment,{children:"Keyword search need to have at least 3 characters"});if(t)return e.jsx(e.Fragment,{children:"Article not found"})},O=()=>{var d,m;const{initialData:s}=A(),{clientChange:t}=N(),[a,x]=c.useState((s==null?void 0:s.articles)??[]),[l,h]=c.useState(((d=s==null?void 0:s.pagination)==null?void 0:d.totalPages)??1),[n,g]=c.useState(((m=s==null?void 0:s.pagination)==null?void 0:m.page)??1),[u]=y(),i=u.get("q"),j=7;c.useEffect(()=>{!i||!t||(async()=>{const r=await C({keyword:i,page:n,limit:j});r!=null&&r.articles&&x(p=>{const v=r.articles.filter(o=>!p.some(w=>w.id===o.id)).map(o=>({...o}));return[...p,...v]}),r!=null&&r.pagination&&h(r.pagination.totalPages)})()},[n]);const f=()=>{n>l||g(r=>r+1)};return e.jsxs(e.Fragment,{children:[e.jsxs(b,{children:[e.jsxs("title",{children:[i??"Search"," - Whatsnew Asia"]}),e.jsx("meta",{name:"description",content:"Whats's New Asia is the ultimate city guide for expats and travelers, featuring the best dining, events, schools, wellness, and travel in Asia"})]}),e.jsxs("section",{className:"py-12",children:[e.jsx("div",{className:"container",children:e.jsx(P,{})}),e.jsxs("div",{className:"container py-12",children:[e.jsx(R,{content:a,q:i}),n<l&&e.jsx("div",{className:"button-wrapper text-center py-8",children:e.jsx(E,{text:"Load More",onClick:f})})]})]})]})};export{O as default};
