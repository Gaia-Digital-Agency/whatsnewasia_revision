import{r as i,j as e}from"./chunk-JZWAC4HX-BaRxOj3G.js";import{g,e as h,c as m}from"./template.service-BGn-PH62.js";import{C as b}from"./ComponentCard-Bj4wr1CG.js";import{A as B}from"./FeaturedImage-D41CYf4Z.js";import{u as I}from"./useNavigationPrompt-B7IDkNRD.js";import{B as f}from"./Button-Daz7UfMq.js";import{u as L}from"./NotificationContext-BWqXEdeR.js";import{T as y}from"./TextArea-BXqZXbfS.js";import"./index-DCyd9kTA.js";import"./media.service-DraIvXRR.js";import"./MediaForm-Be0YSqNR.js";import"./index-Ca5Z8a4N.js";import"./index-B6789YIy.js";import"./PageBreadCrumb-Bw4cwgNk.js";import"./PageMeta-BgUgIrIo.js";import"./Alert-DqFGWyGV.js";import"./useTimedMessage-BwZa_Nir.js";import"./useModal-CQMqfSBi.js";import"./admin-CjiJQ6Cc.js";import"./newsletter.service-ZKntKtau.js";import"./article.service-BgP4NldJ.js";import"./useArticle-DWTfMO-p.js";import"./createLucideIcon-D_j1gqcj.js";const P="http://localhost:8080",st=()=>{const c={isAvailable:!1,isChanged:!1},{setNotification:S}=L(),[l,v]=i.useState({content:{id:0,url:""},...c}),[d,x]=i.useState({content:"",...c}),[p,j]=i.useState({content:"",...c}),[u,N]=i.useState({content:"",...c}),{setBlock:n,isDirty:C}=I();i.useEffect(()=>{(async()=>{try{const t=await g("/logo-header");if((t==null?void 0:t.status_code)==200&&t.data){const s=JSON.parse(t.data.content);v(o=>({...o,content:s,isAvailable:!0}))}}catch(t){console.log(t)}})(),(async()=>{try{const t=await g("/script/head");if((t==null?void 0:t.status_code)==200&&t.data){const s=JSON.parse(t.data.content);x(o=>({...o,content:s,isAvailable:!0}))}}catch(t){console.log(t)}})(),(async()=>{try{const t=await g("/script/prebody");if((t==null?void 0:t.status_code)==200&&t.data){const s=JSON.parse(t.data.content);j(o=>({...o,content:s,isAvailable:!0}))}}catch(t){console.log(t)}})(),(async()=>{try{const t=await g("/script/postbody");if((t==null?void 0:t.status_code)==200&&t.data){const s=JSON.parse(t.data.content);N(o=>({...o,content:s,isAvailable:!0}))}}catch(t){console.log(t)}})()},[]);const A=t=>{v(s=>({...s,content:{id:t.id,url:t.path}})),n(!0)},r=(t="Unexpected Error")=>(S({message:t,type:"fail",isClosed:!1}),!1),a=(t="successfully change logo header")=>(S({message:t,type:"neutral",isClosed:!1}),n(!1),!0),w=async()=>{},J=async()=>{if(l.isAvailable)try{return await h("/logo-header","Logo",JSON.stringify(l.content))?a():r()}catch(t){return console.log(t),r()}else try{return await m("/logo-header","Logo",JSON.stringify(l.content))?a():r()}catch(t){return console.log(t),r()}},O=async()=>{(async()=>{try{return d.isAvailable?await h("/script/head","Script",JSON.stringify(d.content))?a():r():await m("/script/head","Script",JSON.stringify(d.content))?a():r()}catch(t){return console.log(t),r()}})(),(async()=>{try{return p.isAvailable?await h("/script/prebody","Script",JSON.stringify(p.content))?a():r():await m("/script/prebody","Script",JSON.stringify(p.content))?a():r()}catch(t){return console.log(t),r()}})(),(async()=>{try{return u.isAvailable?await h("/script/postbody","Script",JSON.stringify(u.content))?a():r():await m("/script/postbody","Script",JSON.stringify(u.content))?a():r()}catch(t){return console.log(t),r()}})()};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-12",children:e.jsxs("div",{className:"col-span-6",children:[e.jsxs(b,{title:"Logo Image",children:[e.jsx("div",{children:e.jsx(B,{url:`${P}/${l.content.url}`,onSave:A})}),e.jsx(f,{onClick:J,children:"Save Logo"})]}),e.jsxs(b,{title:"Additional Scripts",children:[e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Insert scripts inside ","<head>"," tag"]}),e.jsx(y,{placeholder:"<script>",value:d.content,onChange:t=>{x(s=>({...s,content:t,isChanged:!0})),n(!0)}})]}),e.jsx("div",{className:"spacer py-8"}),e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Insert scripts right after ","<body>"," tag"]}),e.jsx(y,{placeholder:"<script>",value:p.content,onChange:t=>{j(s=>({...s,content:t,isChanged:!0})),n(!0)}})]}),e.jsx("div",{className:"spacer py-8"}),e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Insert scripts right before closing ","</body>"," tag"]}),e.jsx(y,{placeholder:"<script>",value:u.content,onChange:t=>{N(s=>({...s,content:t,isChanged:!0})),n(!0)}})]}),e.jsx("div",{className:"spacer py-8"}),e.jsx(f,{onClick:O,children:"Save Scripts"})]})]})}),e.jsx("div",{className:"fixed bottom-6 right-6",children:C&&e.jsx(f,{onClick:w,children:"Save all settings"})})]})};export{st as default};
