import{r as i,j as e}from"./chunk-JZWAC4HX-DGixXWWH.js";import{g,e as h,c as f}from"./template.service-B7okUSdY.js";import{C as b}from"./ComponentCard-GFTzXSMy.js";import{A as B}from"./FeaturedImage-DfK44KGh.js";import{u as I}from"./useNavigationPrompt-BzwSU0f9.js";import{B as y}from"./Button-DrUF433q.js";import{u as L}from"./NotificationContext-Bm_P1CXC.js";import{T as m}from"./TextArea-WxpYDhhg.js";import"./index-BwXtifl2.js";import"./media.service-D5yt4sIT.js";import"./MediaForm-BfefYGqg.js";import"./index-DOnhHT4B.js";import"./index-DyEGC2D2.js";import"./PageBreadCrumb-BUBP8Mwu.js";import"./PageMeta-BNMh5ef8.js";import"./Alert-D2pDYxK7.js";import"./useTimedMessage-BeJb-9DW.js";import"./useModal-Dx3ZjLOW.js";import"./Badge-DKr_Wewz.js";import"./createLucideIcon-CFSuRwGv.js";const P="http://34.124.244.233/whatsnewasia",Z=()=>{const c={isAvailable:!1,isChanged:!1},{setNotification:S}=L(),[l,v]=i.useState({content:{id:0,url:""},...c}),[d,x]=i.useState({content:"",...c}),[p,j]=i.useState({content:"",...c}),[u,N]=i.useState({content:"",...c}),{setBlock:o,isDirty:C}=I();i.useEffect(()=>{(async()=>{try{const t=await g("/logo-header");if((t==null?void 0:t.status_code)==200&&t.data){const s=JSON.parse(t.data.content);v(n=>({...n,content:s,isAvailable:!0}))}}catch(t){console.log(t)}})(),(async()=>{try{const t=await g("/script/head");if((t==null?void 0:t.status_code)==200&&t.data){const s=JSON.parse(t.data.content);x(n=>({...n,content:s,isAvailable:!0}))}}catch(t){console.log(t)}})(),(async()=>{try{const t=await g("/script/prebody");if((t==null?void 0:t.status_code)==200&&t.data){const s=JSON.parse(t.data.content);j(n=>({...n,content:s,isAvailable:!0}))}}catch(t){console.log(t)}})(),(async()=>{try{const t=await g("/script/postbody");if((t==null?void 0:t.status_code)==200&&t.data){const s=JSON.parse(t.data.content);N(n=>({...n,content:s,isAvailable:!0}))}}catch(t){console.log(t)}})()},[]);const w=t=>{v(s=>({...s,content:{id:t.id,url:t.path}})),o(!0)},r=(t="Unexpected Error")=>(S({message:t,type:"fail",isClosed:!1}),!1),a=(t="successfully change logo header")=>(S({message:t,type:"neutral",isClosed:!1}),o(!1),!0),A=async()=>{},J=async()=>{if(l.isAvailable)try{return await h("/logo-header","Logo",JSON.stringify(l.content))?a():r()}catch(t){return console.log(t),r()}else try{return await f("/logo-header","Logo",JSON.stringify(l.content))?a():r()}catch(t){return console.log(t),r()}},O=async()=>{(async()=>{try{return d.isAvailable?await h("/script/head","Script",JSON.stringify(d.content))?a():r():await f("/script/head","Script",JSON.stringify(d.content))?a():r()}catch(t){return console.log(t),r()}})(),(async()=>{try{return p.isAvailable?await h("/script/prebody","Script",JSON.stringify(p.content))?a():r():await f("/script/prebody","Script",JSON.stringify(p.content))?a():r()}catch(t){return console.log(t),r()}})(),(async()=>{try{return u.isAvailable?await h("/script/postbody","Script",JSON.stringify(u.content))?a():r():await f("/script/postbody","Script",JSON.stringify(u.content))?a():r()}catch(t){return console.log(t),r()}})()};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-12",children:e.jsxs("div",{className:"col-span-6",children:[e.jsxs(b,{title:"Logo Image",children:[e.jsx("div",{children:e.jsx(B,{url:`${P}/${l.content.url}`,onSave:w})}),e.jsx(y,{onClick:J,children:"Save Logo"})]}),e.jsxs(b,{title:"Additional Scripts",children:[e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Insert scripts inside ","<head>"," tag"]}),e.jsx(m,{placeholder:"<script>",value:d.content,onChange:t=>{x(s=>({...s,content:t,isChanged:!0})),o(!0)}})]}),e.jsx("div",{className:"spacer py-8"}),e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Insert scripts right after ","<body>"," tag"]}),e.jsx(m,{placeholder:"<script>",value:p.content,onChange:t=>{j(s=>({...s,content:t,isChanged:!0})),o(!0)}})]}),e.jsx("div",{className:"spacer py-8"}),e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Insert scripts right before closing ","</body>"," tag"]}),e.jsx(m,{placeholder:"<script>",value:u.content,onChange:t=>{N(s=>({...s,content:t,isChanged:!0})),o(!0)}})]}),e.jsx("div",{className:"spacer py-8"}),e.jsx(y,{onClick:O,children:"Save Scripts"})]})]})}),e.jsx("div",{className:"fixed bottom-6 right-6",children:C&&e.jsx(y,{onClick:A,children:"Save all settings"})})]})};export{Z as default};
